#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Mon May 13 17:58:27 2019

@author: random

@description: 这是生成测试文件的脚本
"""
import struct


def main():
    weights = [[130582575366658885, -0.033425], [140229947006621243, -0.031715], [97602371877239208, -0.030319],
               [138342999583154311, -0.022186], [134601398557933978, -0.030232], [98036270559818106, -0.030192],
               [119680655352258570, -0.035791], [130734724286175606, -0.033017], [134449127651049440, -0.032528],
               [115365876956497862, -0.031973], [83374214694923677, -0.005740], [115298580566192325, -0.020326],
               [75877613097609947, -0.029357], [134054596620396863, -0.028915], [132741218743105981, -0.031792],
               [98612226013992035, -0.033420], [115035676470403990, -0.031778], [103493745205234549, -0.032507],
               [79797419861688145, -0.033384], [117149555166905536, -0.036352], [127768071234685832, -0.031180],
               [79819894641333669, -0.031308], [108913161768799402, -0.031914], [92969259856310945, -0.030866],
               [92755697488309180, -0.032714], [114119275186381349, -0.027655], [119222576941090478, -0.031439],
               [111162742361478996, -0.033488], [90631908231752687, -0.033075], [87991981608479844, -0.036580],
               [136184065652840664, -0.028000], [76349254399433521, -0.030979], [100971905454291712, -0.032001],
               [139231103543982737, -0.033450], [105637240567736197, -0.035672], [87139279720804988, -0.010167],
               [90950315278798284, -0.031357], [93369094613492322, -0.033462], [93813684234460535, -0.030370],
               [111115184826774517, -0.028104], [96770426109570867, -0.031182], [121381925850384435, -0.033187],
               [93910053394278683, -0.030140], [130906297854226404, -0.002741], [75947052452430022, -0.036668],
               [110016912467965924, -0.033330], [78525466385530742, -0.032719], [58345810919667743, -0.031683],
               [152224949027211682, -0.031529], [196918478895872889, -0.028876], [211003836381267333, -0.028754],
               [176193749652800917, -0.011347], [210982503674421275, -0.025812], [159976915180864316, -0.021506],
               [210866127423708383, -0.026558], [180003896059026748, -0.030434], [156469916259628289, -0.030899],
               [192987406039558594, -0.030276], [154643915193679545, -0.001385], [166555757336044847, -0.012075],
               [165863348632198176, -0.028129], [160477351605132162, -0.021307], [159313880983868774, -0.030314],
               [190232395412372665, -0.031677], [191475927677764582, -0.030227], [177530350512373953, -0.025982],
               [161874118087536549, -0.031642], [179631511703781511, -0.027548], [189025222069737436, -0.028550],
               [165641986585170068, -0.029675], [191294233414431926, -0.029859], [190241610469987433, -0.028845],
               [169885787438184021, -0.030903], [164373807706498687, -0.025647], [158637948825569145, -0.029738],
               [215676131506689912, -0.030041], [214051921150221379, -0.030977], [208391244761616114, -0.026049],
               [167182893606391907, -0.024749], [197052929189464323, -0.018796], [196516536679535135, -0.030442],
               [144359779680721827, -0.031699], [159143297970816802, -0.026664], [191749340176817201, -0.009903],
               [193247954951400515, -0.029613], [177336659311697871, -0.030122], [178908863729858226, -0.028375],
               [180989155714354266, -0.026920], [154070708112238359, -0.029377], [180294121377849964, -0.031469],
               [156819408962316943, -0.029093], [215644601091839431, -0.002404], [198188923351456051, -0.025621],
               [170987128778215747, -0.031607], [174249184631590952, -0.030067]]

    b = [92453253384488230, 131597890775603062, 115677560107384719, 83554470197227405, 93225916585086658,
         138389924131763821, 124346684745318569, 97989603535472386, 118018292335852022, 88969589830026161,
         136842471574750987, 83024566887703906, 133727220552006505, 89279320789598501, 116693214655848369,
         142626466490257274, 139310385990564850, 100765450773372389, 88744776224511080, 83727866909335736,
         124469658840499131, 93396291859952636, 95788232943550423, 80669933794089690, 129993661031428306,
         87768653099160862, 119916021261510856, 74005557630323526, 79482986489857704, 89232510716259942,
         106068226025791114, 107143583583066301, 99994171399894506, 122868132357343404, 85691429371516474,
         141998056228783934, 119394946805266137, 84805778168134176, 116243947171820129, 93103619854005447,
         112010814557252811, 104333025028020882, 136828191856931765, 141180351454739198, 129180919188520999,
         130088462057779586, 99992453359361897, 68364211861522739, 149206525912281702, 200486118141431210,
         170998335554945246, 176354764769423126, 157428922868921442, 200966022958572321, 208030554988985739,
         147880200536054596, 189276230556763058, 184035159717530263, 197149911963028806, 208498853042600887,
         186531927173467947, 184739728836086400, 180314326059900659, 193671046545804019, 157004115524931904,
         164900774952737587, 162035199699273167, 154278509434031921, 176292760162962219, 168658688433385839,
         161234826453392531, 200512705115612067, 210091608210800547, 176030394506190348, 149321226368958421,
         146161998674328763, 191093508992139237, 155752128793257005, 165823630885822303, 187683733992235049,
         147296330781549884, 172975192424304033, 195944533732947103, 181893074959215327, 201175762124034160,
         171314593285250987, 159587200697940347, 180859776822936983, 206558429092596242, 193799938828056399,
         144903537767867100, 178377279920561850, 147982046415461073, 191171303226262687, 206165172937643928]
    f = open('model.bin', 'wb')
    slots = [0, 0, 0]
    for (k, w) in weights:
        slots[k >> 56] += 1

    data = struct.pack('<iiiiQQQ', 3, 1, 1, 1, slots[0], slots[1], slots[2])
    f.write(data)
    i = 0
    for (k, w) in weights:
        tmp = struct.pack('<Qf', b[i], w)
        f.write(tmp)
        i += 1
    f.close()


if __name__ == '__main__':
    main()
